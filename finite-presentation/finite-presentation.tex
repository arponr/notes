\input{preamble}

\title{Finite presentation (in commutative algebra)}
\author{Arpon Raksit}
\date{March 7, 2013}

\begin{document}
\maketitle
\thispagestyle{fancy}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Locality}

In this section we prove two basic statements about finite
presentation, that "finitely presented implies always finitely
presented"\footnote{This catchy phrasing for the proposition is taken
  from Vakil's notes.} and that it is a local property. The proofs in
the setting of modules and in the setting of algebras are completely
analogous, so we will abstract very slightly and address both at once.

\renewcommand{\C}{\mathcal{C}}

\begin{notation}
  \begin{enumerate}[leftmargin=*]
  \item All rings and algebras are commutative with unit.
  \item For a ring $A$, let $\C_A$ denote either the category of
    $A$-modules or the category of $A$-algebras. All arrows indicate
    morphisms in $\C_A$.
  \item Let $\amalg$ denote the coproduct in $\C_A$, i.e., direct sum
    $\oplus$ for $A$-modules or tensor product $\otimes_A$ for
    $A$-algebras.
  \item For $C \in \obj(\C_A)$ and $n \in \N$ let $C^{\amalg n}$
    denote the $n$-fold coproduct $C \amalg \cdots \amalg C$ and $C^n$
    denote the $n$-fold product $C \times \cdots \times C$.
  \item Let $F_A \in \obj(\C_A)$ denote the free object on one
    element, i.e., $F_A \iso A$ for $A$-modules and $F_A \iso A[t]$
    for $A$-algebras. Thus for any $n \in \N$ there is an isomorphism
    $\hom_{\C_A}(F_A^{\amalg n},C) \iso C^n$ natural in
    $C \in \obj(\C_A)$.
  \end{enumerate}
  And now fix a ring $A$ for the remainder.
\end{notation}

\begin{definition}
  An object $C \in \obj(\C_A)$ is:
  \begin{enumerate}
  \item \emph{finitely generated} if for some $n \in \N$ there is a
    surjection $F_A^{\amalg n} \to M$;
  \item \emph{finitely presented} if for some $n \in \N$ there is a
    surjection $F_A^{\amalg n} \to M$ with finitely generated kernel.
  \end{enumerate}
\end{definition}

\begin{lemma}
  \label{ker-surjection}
  Let $f \c C \to D$ and $g \c D \to E$ be morphisms in $\C_A$.
  Define $h \ce g \circ f$. Then if $f$ is surjective, the canonical
  morphism $\ker(h) \to \ker(g)$ induced by $f$ is surjective. In
  particular, if $\ker(h)$ is finitely generated then so is $\ker(g)$.
\end{lemma}

\begin{proof}
  Evident.
\end{proof}

\begin{proposition}
  \label{fp-implies-always-fp} Let $C \in \obj(\C_A)$ be finitely
  presented. If $\alpha \c D \to C$ is a surjection with $D$ finitely
  generated, then $\ker(\alpha)$ is finitely generated.
\end{proposition}

\begin{proof}
  By \eqref{ker-surjection} we may assume $D \iso F_A^{\amalg m}$. By
  definition we have a surjection $\beta \c F_A^{\amalg n} \to C$ with
  $\ker(\beta)$ finitely generated. Consider the diagram
  \[
  \begin{tikzcd}
    & F_A^{\amalg m} \ar[dr, twoheadrightarrow, "\alpha"] & \\
    F_A^{\amalg m} \amalg F_A^{\amalg n}
    \ar[ur, twoheadrightarrow, "\id \amalg \xi"]
    \ar[dr, twoheadrightarrow, "\eta \amalg \id"]
    \ar[rr, twoheadrightarrow, "\gamma"] & & C, \\
    & F_A^{\amalg n} \ar[ur, twoheadrightarrow, "\beta"] &
  \end{tikzcd}
  \]
  where $\xi \c F_A^{\amalg n} \to F_A^{\amalg m}$ and
  $\eta \c F_A^{\amalg m} \to F_A^{\amalg n}$ are defined such that
  $\alpha \circ \xi = \beta$ and $\beta \circ \eta = \alpha$---which
  exist since free objects are projective in $\C_A$---so that defining
  $\gamma \ce \alpha \amalg \beta$ makes the diagram commute. Now, if
  $t_1,\ldots,t_m$ are the canonical generators (in the appropriate
  sense according to $\C_A$) of $F_A^{\amalg m}$, then clearly
  $\ker(\gamma)$ is generated by $\ker(\beta)$ and
  $\{t_i - \eta(t_i)\}_{1 \le i \le m}$. Thus $\ker(\beta)$ being
  finitely generated implies $\ker(\gamma)$ is finitely generated,
  which implies $\ker(\alpha)$ is finitely generated by
  \eqref{ker-surjection}.
\end{proof}

\begin{proposition}
  \label{fg-fp-local}
  Let $C \in \obj(\C_A)$.
  \begin{enumerate}
  \item \label{global-local} If $C$ is finitely generated
    (resp. presented), then for any $f \in A$ the localisation $C_f$
    is finitely generated (resp. presented) in $\C_{A_f}$.
  \item \label{local-global} If $f_1,\ldots,f_n \in A$ generate the
    unit ideal and $C_{f_i}$ is finitely generated (resp. presented)
    in $\C_{A_{f_i}}$ for each $i$, then $C$ is finitely generated
    (resp. presented).
  \end{enumerate}
\end{proposition}

\begin{proof}
  We first address finite generation. Observe $(F_A)_f \iso F_{A_f}$.
  Thus, since localisation is exact, hence commutes with finite
  products, a surjection $F_A^{\amalg n} \to C$ localises to a
  surjection $F_{A_f}^{\amalg n} \to C_f$. This proves
  \eqref{global-local}. Now suppose for each $i$ that $C_{f_i}$ is
  generated (in the appropriate sense) by
  $\{a_{i,j}/f_i^{r_{i,j}}\}_{1 \le j \le m_i}$.  Take
  $R \ge \max\{r_{i,j}\}$. Then for all $i$ we have that $f_i^Ra$ is
  generated by $\{a_{i,j}\}$ for any $a \in A$. Since $f_1,\ldots,f_n$
  generate the unit ideal, so do $f_1^R,\ldots,f_n^R$ and hence there
  exist $c_i \in A$ such that $\sum c_if_i^R = 1$. It is then clear
  that $\{c_i\} \cup \{a_{i,j}\}$ generates $C$. This proves
  \eqref{local-global}.

  Now finite presentation. Since localisation is exact, hence commutes
  with kernels, \eqref{global-local} for finite presentation is
  immediate from \eqref{global-local} for finite generation. Now
  assume the hypothesis of \eqref{local-global}. Since we have proved
  \eqref{local-global} for finite generation there is a surjection
  $\alpha \c F_A^{\amalg n} \to C$. Then for each $i$,
  \[
  \alpha_{f_i} \c F_{A_{f_i}}^{\amalg n} \to C_{f_i}
  \]
  is a surjection, so by \eqref{fp-implies-always-fp} we know
  $\ker(\alpha_{f_i}) \iso \ker(\alpha)_{f_i}$ is finitely
  generated. By \eqref{local-global} for finite generation this
  implies $\ker(\alpha)$ is finitely generated as desired.
\end{proof}

\begin{remark}
  \eqref{fg-fp-local} is what one needs to prove when showing that a
  morphism of schemes being of locally of finite type or locally of
  finite presentation is local on the source.
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Duality}

\begin{nothing}
  Let $M$ and $N$ be $A$-modules. Let $S \subset A$ be a
  multiplicative set. There is a canonical map of $A_S$-modules
  \begin{equation}
    \label{hom-local-map}
    (\hom_A(M,N))_S \to \hom_{A_s}(M_S,N_S),
  \end{equation}
  sending $\phi/s \in (\hom_A(M,N))_S$ to the map $x/t \mapsto
  \phi(x)/(st)$ in $\hom_{A_s}(M_S,N_S)$.
\end{nothing}

\begin{proposition}
  The map (\ref{hom-local-map}) is injective if $M$ is finitely
  generated and an isomorphism if $M$ is finitely presented.
\end{proposition}

\begin{proof}
  Assume $M$ is finitely generated, say by $x_1,\ldots,x_n \in M$. Let
  $\phi/s \in (\hom_A(M,N))_S$ and suppose $x/t \mapsto \phi(x)/(st)$
  is the zero map. This means for each $i$ there exists $t_i \in S$
  such that $t_i\phi(x_i) = 0$. Let $t \ce \prod_{i=1}^n t_i$ so that
  $t\phi(x_i) = 0$ for all $i$. Since $x_1,\ldots,x_n$ are generators,
  this implies $t\phi(x) = 0$ for all $x \in M$, whence $\phi/s =
  0$. This proves injectivity.

  Now assume $M$ is moreover finitely presented. Let $x \ce
  (x_1,\ldots,x_n)$ and let $r_1(x),\ldots,r_m(x)$ denote the
  relations on $x_1,\ldots,x_n$. Let $\psi \in
  \hom_{A_s}(M_S,N_S)$. Suppose $\psi(x_i) = y_i/s_i$ with $y_i \in
  N$. By taking $s \ce \prod_{i=1}^n s_i$, we can in fact assume $s_1
  = \cdots = s_n = s$. Writing $y = (y_1,\ldots,y_n)$, we must have
  \[
  \psi(r_j(x)) = r_j(y)/s = 0 \implies t_jr_j(y) = 0
  \]
  for some $t_j \in S$. Let $t \ce \prod_{j=1}^m t_j$ so that $tr_j(y)
  = r_j(ty) = 0$ for each $j$. Then we have a well-defined map $\phi
  \in \hom_A(M,N)$ given by $\phi(x_i) = ty_i$. And since
  \[
  \phi(x_i)/(st) = ty_i/(st) = y_i/s = \psi(x_i),
  \]
  and $x_1,\ldots,x_n$ generate $M_S$ over $A_S$, the map
  (\ref{hom-local-map}) sends $\phi/(st)$ to $\psi$. This proves
  surjectivity.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{amsalpha}
\bibliography{refs}

\end{document}
