\input{../preamble}
\input{preamble}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title{Some commutative algebra}
\author{Arpon Raksit}
\date{March 7, 2013 (original); \today\ (last edit)}

\begin{document}
\maketitle
\thispagestyle{fancy}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{notation-nonum}
  Let $A$ be a commutative ring with unit.
\end{notation-nonum}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Locally free modules}

\begin{definition}
  \label{locfree}
  An $A$-module $M$ is \emph{locally free} if there exist
  $f_1,\ldots,f_n \in A$ such that $(f_1,\ldots,f_n) = (1)$ and
  $M_{f_i}$ is a free $A_{f_i}$-module for $1 \le i \le n$.
\end{definition}

\begin{lemma}
  \label{finpres-ker}
  Let $\alpha \c N \to M$ be a surjection of $A$-modules with $N$
  finitely generated and $M$ finitely presented. Then $\ker(\alpha)$
  is finitely generated.
\end{lemma}

\begin{proof}
  Since $M$ is finitely presented we can choose $P \ce A^n$ and a
  surjection $\beta \c P \to M$ with $\ker(\beta)$ finitely
  generated. Define $\gamma \ce \alpha + \beta \c N \oplus P \to M$
  and observe we have short exact sequences
  \[
  0 \to \ker(\beta) \to \ker(\gamma) \to N \to 0
  \quad\text{and}\quad
  0 \to \ker(\alpha) \to \ker(\gamma) \to P \to 0.
  \]
  Since $\ker(\beta)$ and $N$ are finitely generated, the first gives
  that $\ker(\gamma)$ is finitely generated. Then the second splits
  since $P$ is free (hence projective), implying $\ker(\alpha)$ is
  finitely generated.
\end{proof}

\begin{proposition}
  \label{fingenpres-local}
  Let $f_1,\ldots,f_n \in A$ be such that $(f_1,\ldots,f_n) =
  (1)$. Let $M$ be an $A$-module such that $M_{f_i}$ is a finitely
  generated (resp. presented) $A_{f_i}$ module for $1 \le i \le
  n$. Then $M$ is finitely generated (resp. presented).
\end{proposition}

\begin{proof}
  First finite generation. Assume each $M_{f_i}$ is finitely generated
  over $A_{f_i}$, say by $x_{i,j}/f_{i,j}^{r_{i,j}}$ with $x_{i,j} \in
  M$ for $1 \le j \le n_i$. Let $x \in M$. Choosing $r \ge \max
  \{r_{i,j}\}$ we have for each $i$ that $f_i^rx = \sum_{j=1}^{n_i}
  a_{i,j}x_{i,j}$ with $a_{i,j} \in A$. Now suppose $\sum_{i=1}^n
  b_if_i = 1$, where $b_i \in A$. For each monomial in the expansion
  of $\l( \sum_{i=1}^n b_if_i \r)^{nr}$, some $f_i$ must have
  exponent at least $r$, and hence we have
  \[
  \textstyle{x = x\l( \sum_{i=1}^n b_if_i \r)^{nr} = \sum_{i,j}
    c_{i,j} x_{i,j}}
  \]
  for some $c_{i,j} \in A$. Thus $M$ is finitely generated.

  Next finite presentation. Assume each $M_{f_i}$ is finitely
  presented over $A_{f_i}$. We have just shown that $M$ must be
  finitely generated, i.e., we have a surjection $\alpha \c A^r \to
  M$. Then each localisation $\alpha_{f_i} \c A_{f_i}^r \to M_{f_i}$
  is surjective, so $\ker(\alpha)_{f_i} \simeq \ker(\alpha_{f_i})$ is
  finitely generated by (\ref{finpres-ker}). By the above this implies
  $\ker(\alpha)$ is finitely generated, and thus $M$ is finitely
  presented.
\end{proof}

\begin{proposition}
  If an $A$-module $M$ is locally free then it is finitely presented.
\end{proposition}

\begin{proof}
  Immediate from the definition (\ref{locfree}) of locally free and
  (\ref{fingenpres-local}).
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Duality for modules}

\begin{nothing}
  Let $M$ and $N$ be $A$-modules. Let $S \subset A$ be a
  multiplicative set. There is a canonical map of $A_S$-modules
  \begin{equation}
    \label{hom-local-map}
    (\hom_A(M,N))_S \to \hom_{A_s}(M_S,N_S),
  \end{equation}
  sending $\phi/s \in (\hom_A(M,N))_S$ to the map $x/t \mapsto
  \phi(x)/(st)$ in $\hom_{A_s}(M_S,N_S)$.
\end{nothing}

\begin{proposition}
  The map (\ref{hom-local-map}) is injective if $M$ is finitely
  generated and an isomorphism if $M$ is finitely presented.
\end{proposition}

\begin{proof}
  Assume $M$ is finitely generated, say by $x_1,\ldots,x_n \in M$. Let
  $\phi/s \in (\hom_A(M,N))_S$ and suppose $x/t \mapsto \phi(x)/(st)$
  is the zero map. This means for each $i$ there exists $t_i \in S$
  such that $t_i\phi(x_i) = 0$. Let $t \ce \prod_{i=1}^n t_i$ so that
  $t\phi(x_i) = 0$ for all $i$. Since $x_1,\ldots,x_n$ are generators,
  this implies $t\phi(x) = 0$ for all $x \in M$, whence $\phi/s =
  0$. This proves injectivity.

  Now assume $M$ is moreover finitely presented. Let $x \ce
  (x_1,\ldots,x_n)$ and let $r_1(x),\ldots,r_m(x)$ denote the
  relations on $x_1,\ldots,x_n$. Let $\psi \in
  \hom_{A_s}(M_S,N_S)$. Suppose $\psi(x_i) = y_i/s_i$ with $y_i \in
  N$. By taking $s \ce \prod_{i=1}^n s_i$, we can in fact assume $s_1
  = \cdots = s_n = s$. Writing $y = (y_1,\ldots,y_n)$, we must have
  \[
  \psi(r_j(x)) = r_j(y)/s = 0 \implies t_jr_j(y) = 0
  \]
  for some $t_j \in S$. Let $t \ce \prod_{j=1}^m t_j$ so that $tr_j(y)
  = r_j(ty) = 0$ for each $j$. Then we have a well-defined map $\phi
  \in \hom_A(M,N)$ given by $\phi(x_i) = ty_i$. And since
  \[
  \phi(x_i)/(st) = ty_i/(st) = y_i/s = \psi(x_i),
  \]
  and $x_1,\ldots,x_n$ generate $M_S$ over $A_S$, the map
  (\ref{hom-local-map}) sends $\phi/(st)$ to $\psi$. This proves
  surjectivity.
\end{proof}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{amsalpha}
\bibliography{refs}

\end{document}
